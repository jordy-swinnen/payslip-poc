{
  "info": {
    "name": "Payslip Data Extraction API",
    "description": "Collection for testing Payslip extraction and similarity search endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "Extract Payslip Data",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "file",
              "type": "file",
              "src": [],
              "description": "Payslip file (PDF or image format)"
            }
          ]
        },
        "url": {
          "raw": "{{baseUrl}}/api/payslip/extract",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "payslip",
            "extract"
          ]
        },
        "description": "Extracts structured data from a payslip file (PDF or image). The extracted data is also indexed into the vector store for similarity search."
      },
      "response": [
        {
          "name": "Successful Extraction",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/payslip/extract",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payslip",
                "extract"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"personal\": {\n    \"name\": \"John Doe\",\n    \"nationalId\": \"123456789\"\n  },\n  \"period\": {\n    \"monthKey\": \"2024-01\",\n    \"payDate\": \"2024-01-31\"\n  },\n  \"earnings\": [\n    {\n      \"description\": \"Basic Salary\",\n      \"amount\": 5000.00\n    }\n  ],\n  \"deductions\": [\n    {\n      \"description\": \"Tax\",\n      \"amount\": 500.00\n    }\n  ],\n  \"totals\": {\n    \"grossPay\": 5000.00,\n    \"totalDeductions\": 500.00,\n    \"netPay\": 4500.00\n  }\n}"
        }
      ]
    },
    {
      "name": "Ask Question About Payslip",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "file",
              "type": "file",
              "src": [],
              "description": "Payslip file (PDF or image format)"
            },
            {
              "key": "question",
              "type": "text",
              "value": "What is my net pay?",
              "description": "A natural language question to ask about the payslip"
            }
          ]
        },
        "url": {
          "raw": "{{baseUrl}}/api/payslip/ask",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "payslip",
            "ask"
          ]
        },
        "description": "Ask a natural language question about the uploaded payslip document. Returns an answer based on extracted payslip data."
      },
      "response": [
        {
          "name": "Successful Response",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "question",
                  "type": "text",
                  "value": "What is my net pay?"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/payslip/ask",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payslip",
                "ask"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"answer\": \"Your net pay for January is 4,500 USD.\"\n}"
        }
      ]
    },
    {
      "name": "Compare Payslips and Chat",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "previous",
              "type": "file",
              "src": [],
              "description": "Previous payslip file (PDF or image format)"
            },
            {
              "key": "current",
              "type": "file",
              "src": [],
              "description": "Current payslip file (PDF or image format)"
            },
            {
              "key": "question",
              "type": "text",
              "value": "What are the differences between these two payslips?",
              "description": "A natural language question to ask about the comparison"
            }
          ]
        },
        "url": {
          "raw": "{{baseUrl}}/api/payslip/chat",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "payslip",
            "chat"
          ]
        },
        "description": "Compare two payslips (previous and current) and ask a natural language question about their differences. Returns an AI-generated explanation based on the comparison."
      },
      "response": [
        {
          "name": "Successful Comparison",
          "originalRequest": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "previous",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "current",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "question",
                  "type": "text",
                  "value": "What are the differences between these two payslips?"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/payslip/chat",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payslip",
                "chat"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"answer\": \"Comparing your previous and current payslips, your net pay increased from $4,200 to $4,500. This increase is primarily due to a $300 raise in your basic salary.\"\n}"
        }
      ]
    },
    {
      "name": "Get Payslip Section by Document ID",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/payslip/section/:docId",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "payslip",
            "section",
            ":docId"
          ],
          "variable": [
            {
              "key": "docId",
              "value": "payslip:123456789:2024:01:personal",
              "description": "Document ID of the payslip section"
            }
          ]
        },
        "description": "Retrieves a specific payslip section by its document ID. Returns the section data if found, or 404 if not found."
      },
      "response": [
        {
          "name": "Successful Response",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/payslip/section/payslip:123456789:2024:01:personal",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payslip",
                "section",
                "payslip:123456789:2024:01:personal"
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "{\n  \"docId\": \"payslip:123456789:2024:01:personal\",\n  \"section\": \"personal\",\n  \"content\": \"Employee: John Doe, National ID: 123456789\"\n}"
        },
        {
          "name": "Not Found",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/payslip/section/invalid-doc-id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payslip",
                "section",
                "invalid-doc-id"
              ]
            }
          },
          "status": "Not Found",
          "code": 404,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": ""
        }
      ]
    },
    {
      "name": "Find Similar Payslips by National ID",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/payslip/similar?nationalId=123456789&limit=3",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "payslip",
            "similar"
          ],
          "query": [
            {
              "key": "nationalId",
              "value": "123456789",
              "description": "National ID of the employee (optional)"
            },
            {
              "key": "employeeName",
              "value": "",
              "description": "Employee name (optional)",
              "disabled": true
            },
            {
              "key": "limit",
              "value": "3",
              "description": "Maximum number of similar payslips to return (optional, default: 3)"
            }
          ]
        },
        "description": "Searches the vector store for similar payslips by national ID. You can provide either nationalId or employeeName (or both). Returns up to N most similar payslips ordered by relevance."
      },
      "response": [
        {
          "name": "Successful Search",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/payslip/similar?nationalId=123456789&limit=3",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payslip",
                "similar"
              ],
              "query": [
                {
                  "key": "nationalId",
                  "value": "123456789"
                },
                {
                  "key": "limit",
                  "value": "3"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "[\n  {\n    \"payslipId\": \"payslip:123456789:2024:01\",\n    \"nationalId\": \"123456789\",\n    \"name\": \"John Doe\",\n    \"monthKey\": \"2024-01\",\n    \"payDate\": \"2024-01-31\",\n    \"source\": \"payslip_january.pdf\",\n    \"documentIds\": [\n      \"payslip:123456789:2024:01:personal\",\n      \"payslip:123456789:2024:01:period\",\n      \"payslip:123456789:2024:01:earnings\",\n      \"payslip:123456789:2024:01:deductions\"\n    ]\n  },\n  {\n    \"payslipId\": \"payslip:123456789:2023:12\",\n    \"nationalId\": \"123456789\",\n    \"name\": \"John Doe\",\n    \"monthKey\": \"2023-12\",\n    \"payDate\": \"2023-12-31\",\n    \"source\": \"payslip_december.pdf\",\n    \"documentIds\": [\n      \"payslip:123456789:2023:12:personal\",\n      \"payslip:123456789:2023:12:period\",\n      \"payslip:123456789:2023:12:earnings\",\n      \"payslip:123456789:2023:12:deductions\"\n    ]\n  }\n]"
        },
        {
          "name": "Empty Results",
          "originalRequest": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/payslip/similar?nationalId=999999999&limit=3",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "payslip",
                "similar"
              ],
              "query": [
                {
                  "key": "nationalId",
                  "value": "999999999"
                },
                {
                  "key": "limit",
                  "value": "3"
                }
              ]
            }
          },
          "status": "OK",
          "code": 200,
          "_postman_previewlanguage": "json",
          "header": [
            {
              "key": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": "[]"
        }
      ]
    },
    {
      "name": "Find Similar Payslips by Employee Name",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/payslip/similar?employeeName=John Doe&limit=3",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "payslip",
            "similar"
          ],
          "query": [
            {
              "key": "nationalId",
              "value": "",
              "description": "National ID of the employee (optional)",
              "disabled": true
            },
            {
              "key": "employeeName",
              "value": "John Doe",
              "description": "Employee name (optional)"
            },
            {
              "key": "limit",
              "value": "3",
              "description": "Maximum number of similar payslips to return (optional, default: 3)"
            }
          ]
        },
        "description": "Searches the vector store for similar payslips by employee name. You can provide either nationalId or employeeName (or both). Returns up to N most similar payslips ordered by relevance."
      },
      "response": []
    },
    {
      "name": "Find Similar Payslips (Default Limit)",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/payslip/similar?nationalId=123456789",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "api",
            "payslip",
            "similar"
          ],
          "query": [
            {
              "key": "nationalId",
              "value": "123456789",
              "description": "National ID of the employee (optional)"
            },
            {
              "key": "employeeName",
              "value": "",
              "description": "Employee name (optional)",
              "disabled": true
            }
          ]
        },
        "description": "Searches for similar payslips with default limit of 3 results. You can search by nationalId, employeeName, or both."
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    }
  ]
}